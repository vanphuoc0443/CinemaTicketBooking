<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.PasswordField?>
<?import javafx.scene.control.ProgressIndicator?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.StackPane?>
<?import javafx.scene.layout.VBox?>

<StackPane styleClass="auth-container"
           prefWidth="1000" prefHeight="700"
           xmlns="http://javafx.com/javafx/25"
           xmlns:fx="http://javafx.com/fxml/1"
           fx:controller="fxcontroller.ForgotPasswordController">

    <VBox styleClass="auth-card" spacing="16" alignment="CENTER">

        <!-- Branding -->
        <HBox spacing="8" alignment="CENTER">
            <Label text="ðŸ”" style="-fx-font-size: 44px;"/>
        </HBox>
        <Label text="QuÃªn máº­t kháº©u" styleClass="auth-title"/>

        <!-- Gradient Divider -->
        <Region styleClass="gradient-divider" maxWidth="280"/>

        <!-- Status messages (shared) -->
        <Label fx:id="lblError" styleClass="auth-error" wrapText="true"/>
        <Label fx:id="lblSuccess" style="-fx-text-fill: #4caf50; -fx-font-size: 13px;" wrapText="true"/>

        <!-- === STEP 1: Email Input === -->
        <VBox fx:id="emailSection" spacing="12" alignment="CENTER">
            <Label text="Nháº­p email Ä‘á»ƒ nháº­n mÃ£ xÃ¡c nháº­n" styleClass="auth-subtitle"/>

            <VBox spacing="8">
                <Label text="ðŸ“§  Email" styleClass="text-secondary"/>
                <TextField fx:id="txtEmail" promptText="Nháº­p email Ä‘Ã£ Ä‘Äƒng kÃ½" styleClass="auth-field"/>
            </VBox>

            <ProgressIndicator fx:id="loadingIndicator" visible="false" maxWidth="32" maxHeight="32"/>

            <Button fx:id="btnSend" text="ðŸ“§ Gá»­i email Ä‘áº·t láº¡i máº­t kháº©u" onAction="#handleSend"
                    styleClass="btn-primary" prefWidth="320" prefHeight="44"/>
        </VBox>

        <!-- === STEP 2: Verification Code + New Password === -->
        <VBox fx:id="verifySection" spacing="12" alignment="CENTER" visible="false" managed="false">
            <Label text="Nháº­p mÃ£ xÃ¡c nháº­n vÃ  máº­t kháº©u má»›i" styleClass="auth-subtitle"/>

            <VBox spacing="8">
                <Label text="ðŸ”‘  MÃ£ xÃ¡c nháº­n" styleClass="text-secondary"/>
                <TextField fx:id="txtCode" promptText="Nháº­p mÃ£ 8 kÃ½ tá»± tá»« email" styleClass="auth-field"
                           style="-fx-font-size: 18px; -fx-alignment: CENTER; -fx-letter-spacing: 4px;"/>
            </VBox>

            <VBox spacing="8">
                <Label text="ðŸ”’  Máº­t kháº©u má»›i" styleClass="text-secondary"/>
                <PasswordField fx:id="txtNewPassword" promptText="Tá»‘i thiá»ƒu 6 kÃ½ tá»±" styleClass="auth-field"/>
            </VBox>

            <VBox spacing="8">
                <Label text="ðŸ”’  XÃ¡c nháº­n máº­t kháº©u" styleClass="text-secondary"/>
                <PasswordField fx:id="txtConfirmPassword" promptText="Nháº­p láº¡i máº­t kháº©u má»›i" styleClass="auth-field"/>
            </VBox>

            <Button text="âœ… Äá»•i máº­t kháº©u" onAction="#handleVerify"
                    styleClass="btn-primary" prefWidth="320" prefHeight="44"/>
        </VBox>

        <!-- Back to login -->
        <HBox spacing="6" alignment="CENTER">
            <Label text="Nhá»› máº­t kháº©u?" styleClass="text-muted"/>
            <Button text="ÄÄƒng nháº­p" onAction="#goBack" styleClass="btn-text"/>
        </HBox>
    </VBox>
</StackPane>
