<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.control.*?>

<BorderPane styleClass="seat-page-body"
            prefWidth="1000" prefHeight="700"
            xmlns="http://javafx.com/javafx/25"
            xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="fxcontroller.SeatController">

    <!-- TOP: Blue gradient header -->
    <top>
        <VBox spacing="0">
            <HBox alignment="CENTER" styleClass="seat-header">
                <Button text="â†" onAction="#goBack" styleClass="seat-header-btn"/>
                <Region HBox.hgrow="ALWAYS"/>
                <Label text="Chá»n gháº¿" styleClass="seat-header-title"/>
                <Region HBox.hgrow="ALWAYS"/>
                <Button text="âœ•" onAction="#goBack" styleClass="seat-header-btn"/>
            </HBox>

            <!-- Cinema info card -->
            <HBox styleClass="cinema-info-card" alignment="CENTER_LEFT" spacing="12">
                <padding><Insets top="10" right="20" bottom="10" left="20"/></padding>

                <VBox spacing="4" HBox.hgrow="ALWAYS">
                    <Label fx:id="cinemaNameLabel" text="Cinema ABC" styleClass="cinema-name"/>
                    <Label fx:id="cinemaDetailLabel" text="09/03 - 20:45 - Screen02" styleClass="cinema-detail"/>
                </VBox>

                <VBox alignment="CENTER_RIGHT" spacing="2">
                    <Label text="Thá»i gian giá»¯ gháº¿" styleClass="countdown-label"/>
                    <Label fx:id="countdownLabel" text="10:00" styleClass="countdown-timer"/>
                </VBox>
            </HBox>
        </VBox>
    </top>

    <!-- CENTER: Scrollable seat grid area -->
    <center>
        <ScrollPane fitToWidth="true" hbarPolicy="NEVER" vbarPolicy="AS_NEEDED">
            <VBox alignment="TOP_CENTER" spacing="14">
                <padding><Insets top="16" right="20" bottom="16" left="20"/></padding>

                <!-- Screen indicator -->
                <VBox styleClass="screen-indicator-cinema" alignment="CENTER" maxWidth="400">
                    <Label fx:id="screenLabel" text="Screen02" styleClass="screen-label-cinema"/>
                </VBox>

                <Region prefHeight="10"/>

                <!-- Dynamic seat grid (built in controller) -->
                <GridPane fx:id="seatGrid" hgap="4" vgap="6" alignment="CENTER"/>

                <Region prefHeight="6"/>

                <!-- Legend -->
                <HBox spacing="16" alignment="CENTER">
                    <HBox spacing="5" alignment="CENTER">
                        <Region styleClass="legend-cinema-dot" style="-fx-background-color: #8d8d97;"/>
                        <Label text="Gháº¿ thÆ°á»ng" styleClass="legend-cinema-label"/>
                    </HBox>
                    <HBox spacing="5" alignment="CENTER">
                        <Region styleClass="legend-cinema-dot" style="-fx-background-color: #7e57c2;"/>
                        <Label text="Gháº¿ VIP" styleClass="legend-cinema-label"/>
                    </HBox>
                    <HBox spacing="5" alignment="CENTER">
                        <Region styleClass="legend-cinema-dot" style="-fx-background-color: #e91e8b;"/>
                        <Label text="Gháº¿ Ä‘Ã´i" styleClass="legend-cinema-label"/>
                    </HBox>
                    <HBox spacing="5" alignment="CENTER">
                        <Region styleClass="legend-cinema-dot" style="-fx-background-color: #f59e0b;"/>
                        <Label text="Äang chá»n" styleClass="legend-cinema-label"/>
                    </HBox>
                    <HBox spacing="5" alignment="CENTER">
                        <Region styleClass="legend-cinema-dot" style="-fx-background-color: #5c2020;"/>
                        <Label text="Äang giá»¯" styleClass="legend-cinema-label"/>
                    </HBox>
                    <HBox spacing="5" alignment="CENTER">
                        <Region styleClass="legend-cinema-dot" style="-fx-background-color: #2a2a35;"/>
                        <Label text="ÄÃ£ Ä‘áº·t" styleClass="legend-cinema-label"/>
                    </HBox>
                </HBox>
            </VBox>
        </ScrollPane>
    </center>

    <!-- BOTTOM: Booking panel -->
    <bottom>
        <VBox styleClass="booking-panel" spacing="10">
            <!-- Panel header row -->
            <HBox alignment="CENTER_LEFT" spacing="10">
                <Label text="ðŸŽŸ" style="-fx-font-size: 18px;"/>
                <VBox spacing="2" HBox.hgrow="ALWAYS">
                    <Label text="ThÃ´ng tin Ä‘áº·t vÃ©" styleClass="booking-panel-title"/>
                    <Label text="Báº¡n cÃ³ thá»ƒ xem gháº¿ Ä‘Ã£ chá»n táº¡i Ä‘Ã¢y" styleClass="booking-panel-subtitle"/>
                </VBox>
                <Button fx:id="togglePanelBtn" text="âˆ§" onAction="#togglePanel" styleClass="panel-toggle-btn"/>
            </HBox>

            <!-- Selected seats chips (collapsible) -->
            <FlowPane fx:id="seatChipsPane" hgap="8" vgap="8" visible="true" managed="true"/>

            <!-- Total + Continue -->
            <HBox alignment="CENTER" spacing="16">
                <HBox alignment="CENTER_LEFT" spacing="8" HBox.hgrow="ALWAYS">
                    <StackPane>
                        <Label text="ðŸŽ«" styleClass="total-price-icon"/>
                        <Label fx:id="countBadge" text="" styleClass="total-count-badge"
                               StackPane.alignment="TOP_RIGHT"
                               translateX="8" translateY="-4"/>
                    </StackPane>
                    <Label fx:id="totalPriceLabel" text="0Ä‘" styleClass="total-price-label"/>
                </HBox>
                <Button fx:id="continueBtn" text="Tiáº¿p tá»¥c" onAction="#goSummary" styleClass="btn-continue"/>
            </HBox>
        </VBox>
    </bottom>
</BorderPane>
